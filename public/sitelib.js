!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sitelib=t():e.sitelib=t()}(self,(function(){return(()=>{"use strict";var e={882:(e,t,i)=>{i.d(t,{DEFAULT_LOG_GROUP:()=>o});const o="Common"},25:(e,t,i)=>{i.d(t,{g:()=>o});class o{equals(e){return this===e}}},232:(e,t,i)=>{i.d(t,{D:()=>s});var o=i(882),r=i(25);const n={零:0,一:1,二:2,两:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10,百:100,千:1e3,万:1e4,亿:1e8};let s={printGroupDebug:function(e=o.DEFAULT_LOG_GROUP,...t){console.group(`[${e}]`);let i=[];for(let e=0;e<t.length;e++)i.push(s.isObject(t[e])?JSON.parse(JSON.stringify(t[e])):t[e]);console.debug(...i),console.groupEnd()},get:function(e,t,i){return new Promise(((o,r)=>{let n=new XMLHttpRequest;if(n.responseType=i||"json",n.addEventListener("load",(function(){o(this.response||this.responseText)})),n.addEventListener("error",(function(){r(this)})),n.open("GET",e),t)for(let e in t)n.setRequestHeader(e,t[e]);n.send()}))},post:function(e,t={"Content-Type":"application/x-www-form-urlencoded"},i,o){return new Promise(((r,n)=>{let s=new XMLHttpRequest;s.responseType=o||"json",s.addEventListener("load",(function(){r(this.response||this.responseText)})),s.addEventListener("error",(function(){n(this)})),s.open("POST",e);for(let e in t)s.setRequestHeader(e,t[e]);s.send(i)}))},getCookie:function(e){let t=document.cookie.replace(/\s/g,"").split(";");for(let i=0,o=t.length;i<o;i++){let o=t[i].split("=");if(o[0]==e)return decodeURIComponent(o[1])}return""},getQueryParameter:function(e){for(let[t,i]of new URLSearchParams(window.location.search).entries())if(t===e)return i},asyncDelayedFn:function(e,t,i,o=0){return new Promise(((r,n)=>setTimeout((()=>{void 0===i?r(t.apply(e)):Array.isArray(i)?r(t.apply(e,i)):n(i),r(!0)}),o)))},isInteger:function(e){if(isNaN(e))return!1;let t=parseFloat(e);return(0|t)===t},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isZH:function(e){return/^[\u4e00-\u9fa5]+$/.test(e)},isChineseDigits:function(e){let t=Object.keys(n);for(const i of e)if(!t.includes(i))return!1;return!0},zh2Digits:function(e){if(s.isInteger(e))return parseInt(e);if(!this.isChineseDigits(e))return;let t=0,i=1;for(let o=e.length-1;o>=0;o--){let r=n[e[o]];r>=10&&0==o?r>i?(i=r,t+=r):i*=r:r>=10?r>i?i=r:i*=r:t+=i*r}return t},digits2ZH:function(e){if(this.isZH(e))return e;if(!s.isInteger(e))return;let t=["零","一","二","三","四","五","六","七","八","九","十","百","千","万","亿"],i=e.length;return 1==i?t[e]:2==i?10==e?t[e]:e>10&&e<20?"十"+t[e.charAt(1)]:t[e.charAt(0)]+"十"+t[e.charAt(1)].replace("零",""):void 0},isHttpSuccess:function(e){return!!e&&e>=200&&e<300},anyMemberNotEmpty:function(e,t){let i;return e.some((e=>(i=t[e],!!i))),i},isObject:function(e){return"[object Object]"===Object.prototype.toString.apply(e)||e instanceof Object},isString:function(e){return e instanceof String||"string"==typeof e},isBlank:function(e){return s.isString(e)?""===e.trim():null==e},assignNotUndefined:function(e,...t){return t.forEach((t=>{Object.keys(t).forEach((i=>{let o=t[i];void 0!==o&&(e[i]=o)}))})),e},assignNotEmpty:function(e,t,i=!1,o=!1){if(!Array.isArray(t))throw new TypeError("Invalid sources");return t.forEach((t=>{Object.keys(t).forEach((r=>{let n=t[r],a=e[r];if(null!=n&&!Object.is(NaN,n))if(Array.isArray(a)){if(!Array.isArray(n))throw new TypeError(`${r} of source is not an array`);o?n.forEach((e=>{a.includes(e)||a.push(e)})):e[r]=n}else if(s.isObject(a)){if(!s.isObject(n))throw new TypeError(`${r} of source is not an object`);i?s.assignNotEmpty(a,[n],i,o):e[r]=n}else e[r]=n}))})),e},isIterable:function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},isEqual:function(e,t){if(e instanceof Array){if(!(t instanceof Array)||e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!s.isEqual(e[i],t[i]))return!1;return!0}return!!Object.is(e,t)||(e instanceof r.g?e.equals(t):e===t)},formatDate:function(e,t="MM/dd/yyyy hh:mm:ss"){e instanceof Date||(e=new Date(e));var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}}},719:(e,t,i)=>{i.d(t,{scriptName:()=>r});const o="undefined"==typeof GM_info?{name:"Tampermonkey"}:GM_info.script,r=o&&o.name},235:(e,t,i)=>{i.d(t,{MessageTypes:()=>o,EMOJIS:()=>r});const o={GENERAL:"general",SITE_INFO:"site_info",VIDEO_ATTR_INITIALIZED:"video_attr_initialized",VIDEO_READY:"video_ready",SWITCH_PLAYING_VIDEO:"switch_playing_video",REMOVE_IFRAME:"remove_iframe",READY_FOR_MESSAGE:"ready_for_message",REQUEST_WEBFULLSCREEN:"request_webfullscreen",EXIT_WEBFULLSCREEN:"exit_webfullscreen",KEYDOWN:"keydown",VIEWPORT_DIMENSION:"viewport_dimension",test:function(e){if(e===o.test)return!1;for(let t in o)if(this[t]===e)return!0;return!1}},r={angry:[",,Ծ‸Ծ,,","(╯‵□′)╯︵┻━┻"],happy:["=‿=✧","●ω●","(/ ▽ \\)","(=・ω・=)","(●'◡'●)ﾉ♥","<(▰˘◡˘▰)>","(⁄ ⁄•⁄ω⁄•⁄ ⁄)","(ง,,• ᴗ •,,)ง ✧",">ㅂ<ﾉ ☆"],shock:["Σ( ° △ °|||)︴","┌( ಠ_ಠ)┘","(ﾟДﾟ≡ﾟдﾟ)!?","∑(っ °Д °;)っ"],sad:["＞︿＜","＞△＜","●︿●","(´；ω；`)"],helpless:["◐▽◑","ʅ（´◔౪◔）ʃ","_(:3 」∠)_","_(┐「ε:)_","(°▽°)ﾉ","←◡←","_(•̀ᴗ•́ 」∠ ❀)_","_φ(･ω･` )"],custom:["(`･ω･´)","(^_-)-☆","༼ つ ◕_◕ ༽つ","(☞ﾟヮﾟ)☞","( ͡° ͜ʖ ͡°)","(っ˘ڡ˘ς)","(⌐■_■)","( ͡~ ͜ʖ ͡°)","(╯°□°）╯︵ ┻━┻","(͡•_ ͡• )"]}},70:(e,t,i)=>{i.d(t,{D:()=>s});var o=i(719),r=i(235),n=i(232);const s={debug:function(...e){n.D.printGroupDebug(o.scriptName,...e)},gmGet:function(e,t,i,o=!1){return new Promise(((r,n)=>{GM_xmlhttpRequest({method:"GET",url:e,headers:t,nocache:o,responseType:i||"json",onload:e=>{r(e.response||e.responseText)},onerror:e=>{n(e)}})}))},gmPost:function(e,t,i,o){return t=t||{"Content-Type":"application/x-www-form-urlencoded"},n.D.isObject(i)&&(i=JSON.stringify(i)),new Promise(((r,n)=>{GM_xmlhttpRequest({method:"POST",url:e,headers:t,data:i,responseType:o||"json",onload:e=>{r("blob"===o?e:e.response||e.responseText)},onerror:e=>{n(e)}})}))},gmOptions:function(e,t,i){return new Promise(((o,r)=>{GM_xmlhttpRequest({method:"OPTIONS",url:e,headers:t,responseType:i||"json",onload:e=>{o(e.response||e.responseText)},onerror:e=>{r(e)}})}))},printReceiveMessage:function(e){s.debug(`>>> From: ${e.origin}, To: ${window.location.origin}, Message:`,e.data)},printSendMessage:function(e,t){s.debug(`<<< To: ${e}, From: ${window.location.origin}, Message:`,t)},randomEmoji:{}};for(let e in r.EMOJIS)s.randomEmoji[e]=()=>r.EMOJIS[e][Math.floor(Math.random()*r.EMOJIS[e].length)]}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{Class:()=>e,Enum:()=>t,util:()=>_});var e={};i.r(e),i.d(e,{PlayerMetadata:()=>g,Site:()=>f,VideoPortalSite:()=>S,VideoSite:()=>h});var t={};i.r(t),i.d(t,{DefaultPlayerMetadatas:()=>B,SiteCategories:()=>w,SiteIDs:()=>b,Sites:()=>y,VideoCategories:()=>m,VideoPortalSites:()=>A,VideoSites:()=>M});var r,n=i(232),s=i(235),a=i(70),l=new Uint8Array(16);function c(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(l)}const u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&u.test(e)};for(var I=[],E=0;E<256;++E)I.push((E+256).toString(16).substr(1));const p=function(e,t,i){var o=(e=e||{}).random||(e.rng||c)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=o[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(I[e[t+0]]+I[e[t+1]]+I[e[t+2]]+I[e[t+3]]+"-"+I[e[t+4]]+I[e[t+5]]+"-"+I[e[t+6]]+I[e[t+7]]+"-"+I[e[t+8]]+I[e[t+9]]+"-"+I[e[t+10]]+I[e[t+11]]+I[e[t+12]]+I[e[t+13]]+I[e[t+14]]+I[e[t+15]]).toLowerCase();if(!d(i))throw TypeError("Stringified UUID is invalid");return i}(o)};class g{containerSelector;controlsSelector;topElementSelectors;playButtonSelector;fullscreenButtonSelector;webFullscreenButtonSelector;volumeButtonSelector;constructor({containerSelector:e,controlsSelector:t,topElementSelectors:i=[],playButtonSelector:o,volumeButtonSelector:r,fullscreenButtonSelector:n,webFullscreenButtonSelector:s}){this.containerSelector=e,this.controlsSelector=t,this.topElementSelectors=i,this.playButtonSelector=o,this.volumeButtonSelector=r,this.fullscreenButtonSelector=n,this.webFullscreenButtonSelector=s}copy(){let e=new g({});return n.D.assignNotEmpty(e,[this]),e}}class f{id;baseSiteId;#e;origin;hrefRegEx;siteCategories;subcategories;originWhitelist;additionalInfo;constructor({id:e,baseSiteId:t,origin:i,hrefRegEx:o,siteCategories:r=[],subcategories:n=[],originWhitelist:s=[],additionalInfo:a={}}){this.id=e,this.baseSiteId=t,this.#e=p(),this.origin=i,this.hrefRegEx=o,this.siteCategories=r,this.subcategories=n,this.originWhitelist=s,this.additionalInfo=a}isEmbedded(){return self!==top}isBaseSite(){return this.baseSiteId===this.id}validateMessage(e){let t=e.data;if(!(t&&t.type&&t.src&&t.tag))return!1;let i=e.origin;return(i===window.location.origin||!!this.originWhitelist?.includes(i))&&s.MessageTypes.test(t.type)&&(t.allowSelf||t.tag!==this.#e)}postMessage(e,t,i,o,r=!1){let n={type:i,content:o,src:window.location.href,tag:this.#e,allowSelf:r};a.D.printSendMessage(t,n),e.postMessage(n,t)}test(){return this.hrefRegEx?this.hrefRegEx.test(window.location.href):!!this.origin&&this.origin==window.location.origin}}class h extends f{#t;get defaultPlayerMetadata(){return this.#t}constructor(e,t){super({id:e.id,baseSiteId:e.baseSiteId,origin:e.origin,hrefRegEx:e.hrefRegEx,siteCategories:e.siteCategories,subcategories:e.subcategories,originWhitelist:e.originWhitelist,additionalInfo:e.additionalInfo}),this.#t=t}}class S extends f{additionalInfo;constructor(e,t={}){super({id:e.id,baseSiteId:e.baseSiteId,origin:e.origin,hrefRegEx:e.hrefRegEx,siteCategories:e.siteCategories,subcategories:e.subcategories,originWhitelist:e.originWhitelist,additionalInfo:e.additionalInfo}),this.additionalInfo=t}}const w={DATABASE:"Database",DICTIONARY:"Dictionary",GAMING:"Gaming",IMAGE_HOSTING:"Image Hosting",JAV:"JAV",LIVE_STREAMING:"Live Streaming",VIDEO_HOSTING:"Video Hosting",VIDEO_SHARING:"Video Sharing",VIDEO_STREAMING:"Video Streaming"},m={JAV:"JAV",TV_SERIES:"TV Series",MOVIE:"Movie"},b={"7MM":"7MM",AVGLE:"AVGLE",AVGLE_VIDEO:"AVGLE_VIDEO",AVGLE_EMBED:"AVGLE_EMBED",BILIBILI:"BILIBILI",BILIBILI_VIDEO:"BILIBILI_VIDEO",BILIBILI_BANGUMI:"BILIBILI_BANGUMI",BILIBILI_LIVE:"BILIBILI_LIVE",BUYCAR5:"BUYCAR5",DIOUS:"DIOUS",JABLE:"JABLE",JAVLIBRARY:"JAVLIBRARY",JX444662:"JX444662",MEIJUBS:"MEIJUBS",MEIJUTTB:"MEIJUTTB",MINGTIAN6:"MINGTIAN6",MM9842:"MM9842",NEXUSMODS:"NEXUSMODS",QINGBEIBAN:"QINGBEIBAN",QXWK:"QXWK",STEAM_COMMUNITY:"STEAM_COMMUNITY",STEAM_COMMUNITY_REVIEW:"STEAM_COMMUNITY_REVIEW",STEAM_STORE:"STEAM_STORE",WALLHAVEN:"WALLHAVEN",WUKONGMEIJU:"WUKONGMEIJU",YOUTUBE:"Youtube",YOUTUBE_EMBED:"YOUTUBE_EMBED",hasValue(e){for(let t in b)if(b[t]===e)return!0;return!1}},y={"7MM":new f({id:b["7MM"],baseSiteId:b["7MM"],origin:"https://7mmtv.tv",hrefRegEx:/^https:\/\/7mmtv\.tv\/.*/,siteCategories:[w.JAV,w.VIDEO_STREAMING],subcategories:[m.JAV],originWhitelist:["https://mm9842.com","https://avgle.com"]}),AVGLE_VIDEO:new f({id:b.AVGLE_VIDEO,baseSiteId:b.AVGLE,origin:"https://avgle.com",hrefRegEx:/^https:\/\/avgle\.com\/video\/\w+/,siteCategories:[w.JAV,w.VIDEO_SHARING],subcategories:[m.JAV],originWhitelist:["https://7mmtv.tv"]}),AVGLE_EMBED:new f({id:b.AVGLE_EMBED,baseSiteId:b.AVGLE,origin:"https://avgle.com",hrefRegEx:/^https:\/\/avgle\.com\/embed\/\w+$/,siteCategories:[w.JAV,w.VIDEO_SHARING],subcategories:[m.JAV],originWhitelist:["https://7mmtv.tv"]}),BILIBILI:new f({id:b.BILIBILI,baseSiteId:b.BILIBILI,origin:"https://www.bilibili.com",hrefRegEx:/^https:\/\/www\.bilibili\.com\/.*/,siteCategories:[w.VIDEO_SHARING]}),BILIBILI_BANGUMI:new f({id:b.BILIBILI_BANGUMI,baseSiteId:b.BILIBILI,origin:"https://www.bilibili.com",hrefRegEx:/^https:\/\/www\.bilibili\.com\/bangumi\/play\/.+/,siteCategories:[w.VIDEO_SHARING]}),BILIBILI_LIVE:new f({id:b.BILIBILI_LIVE,baseSiteId:b.BILIBILI,origin:"https://live.bilibili.com",hrefRegEx:/^https:\/\/live\.bilibili\.com\/.*/,siteCategories:[w.LIVE_STREAMING]}),BILIBILI_VIDEO:new f({id:b.BILIBILI_VIDEO,baseSiteId:b.BILIBILI,origin:"https://www.bilibili.com",hrefRegEx:/^https:\/\/www\.bilibili\.com\/video\/.+/,siteCategories:[w.VIDEO_SHARING]}),BUYCAR5:new f({id:b.BUYCAR5,baseSiteId:b.BUYCAR5,origin:"https://vod3.buycar5.cn",hrefRegEx:/^https:\/\/vod\d+\.buycar5\.cn/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),DIOUS:new f({id:b.DIOUS,baseSiteId:b.DIOUS,origin:"https://v7.dious.cc",hrefRegEx:/^https:\/\/v7.dious.cc/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),JABLE:new f({id:b.JABLE,baseSiteId:b.JABLE,origin:"https://jable.tv",hrefRegEx:/^https:\/\/jable.tv/,siteCategories:[w.JAV,w.VIDEO_SHARING],subcategories:[m.JAV]}),JAVLIBRARY:new f({id:b.JAVLIBRARY,baseSiteId:b.JAVLIBRARY,origin:"https://www.javlibrary.com",hrefRegEx:/^https:\/\/www\.javlibrary\.com\/.*/,siteCategories:[w.JAV,w.DATABASE]}),JX444662:new f({id:b.JX444662,baseSiteId:b.JX444662,origin:"https://jx.444662.cn",hrefRegEx:/^https:\/\/jx.444662.cn/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),MEIJUBS:new f({id:b.MEIJUBS,baseSiteId:b.MEIJUBS,origin:"https://www.meijubs.com",siteCategories:[w.VIDEO_STREAMING],subcategories:[m.TV_SERIES],originWhitelist:["https://vod3.buycar5.cn","https://jx.444662.cn","https://vod4.buycar5.cn","https://v7.dious.cc"]}),MEIJUTTB:new f({id:b.MEIJUTTB,baseSiteId:b.MEIJUTTB,origin:"https://www.meijuttb.com",siteCategories:[w.VIDEO_STREAMING],subcategories:[m.TV_SERIES],originWhitelist:["https://vod3.buycar5.cn","https://jx.444662.cn","https://vod4.buycar5.cn"]}),MINGTIAN6:new f({id:b.MINGTIAN6,baseSiteId:b.MINGTIAN6,origin:"https://www.mingtian6.com",siteCategories:[w.VIDEO_STREAMING],subcategories:[m.TV_SERIES,m.MOVIE],originWhitelist:["https://www.qingbeiban.com"]}),MM9842:new f({id:b.MM9842,baseSiteId:b.MM9842,origin:"https://mm9842.com",hrefRegEx:/^https:\/\/mm9842.com/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://7mmtv.tv"]}),NEXUSMODS:new f({id:b.NEXUSMODS,baseSiteId:b.NEXUSMODS,origin:"https://www.nexusmods.com",siteCategories:[w.GAMING],originWhitelist:["https://www.youtube.com"]}),QINGBEIBAN:new f({id:b.QINGBEIBAN,baseSiteId:b.QINGBEIBAN,origin:"https://www.qingbeiban.com",hrefRegEx:/^https:\/\/www.qingbeiban.com/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://www.mingtian6.com"]}),QXWK:new f({id:b.QXWK,baseSiteId:b.QXWK,origin:"https://code.qxwk.net",hrefRegEx:/^https:\/\/code.qxwk.net/,siteCategories:[w.VIDEO_HOSTING],originWhitelist:["https://m.wukongmeiju.com"]}),STEAM_COMMUNITY_REVIEW:new f({id:b.STEAM_COMMUNITY_REVIEW,baseSiteId:b.STEAM_COMMUNITY,origin:"https://steamcommunity.com",hrefRegEx:/^https:\/\/steamcommunity\.com\/app\/\d+\/reviews\/.+/,siteCategories:[w.GAMING]}),STEAM_STORE:new f({id:b.STEAM_STORE,baseSiteId:b.STEAM_STORE,origin:"https://store.steampowered.com",hrefRegEx:/^https:\/\/store\.steampowered\.com\/.*/,siteCategories:[w.GAMING]}),WALLHAVEN:new f({id:b.WALLHAVEN,baseSiteId:b.WALLHAVEN,origin:"https://wallhaven.cc",hrefRegEx:/^https:\/\/wallhaven\.cc\/.*/,siteCategories:[w.IMAGE_HOSTING]}),WUKONGMEIJU:new f({id:b.WUKONGMEIJU,baseSiteId:b.WUKONGMEIJU,origin:"https://m.wukongmeiju.com",siteCategories:[w.VIDEO_STREAMING],subcategories:[m.TV_SERIES],originWhitelist:["https://code.qxwk.net"]}),YOUTUBE:new f({id:b.YOUTUBE,baseSiteId:b.YOUTUBE,origin:"https://www.youtube.com",siteCategories:[w.VIDEO_SHARING]}),YOUTUBE_EMBED:new f({id:b.YOUTUBE_EMBED,baseSiteId:b.YOUTUBE,origin:"https://www.youtube.com",hrefRegEx:/^https:\/\/www.youtube.com\/embed\/[\w-]+$/,siteCategories:[w.VIDEO_SHARING],originWhitelist:["https://www.nexusmods.com"]}),get(e){let t;for(let i in y){let o=y[i];if(o instanceof f&&o.id===e){if(!o.isBaseSite()||t)return o;t=o}}return t}},B={AVLGE:new g({containerSelector:"div#video-player",controlsSelector:"div.vjs-control-bar",playButtonSelector:"button.vjs-play-control",fullscreenButtonSelector:"button.vjs-fullscreen-control",topElementSelectors:[".vjs-related-carousel-holder"]}),DPLAYER:new g({containerSelector:"div#dplayer, div#mvideo",playButtonSelector:"button.dplayer-play-icon",volumeButtonSelector:"button.dplayer-volume-icon",fullscreenButtonSelector:"button.dplayer-full-icon"}),JABLE:new g({containerSelector:"div.plyr.plyr--video",controlsSelector:"div.plyr__controls",volumeButtonSelector:"button[data-plyr=mute]",fullscreenButtonSelector:"button[data-plyr=fullscreen]"}),get(e){for(let t in B)if(t===e)return B[t]}},M={AVGLE:new h(y.AVGLE_VIDEO,B.AVLGE.copy()),AVGLE_EMBED:new h(y.AVGLE_EMBED,B.AVLGE.copy()),BILIBILI_VIDEO:new h(y.BILIBILI_VIDEO,new g({containerSelector:"div.bilibili-player-video-wrap",controlsSelector:".bilibili-player-video-control-wrap",playButtonSelector:"div.bilibili-player-video-btn-start",volumeButtonSelector:"button.bilibili-player-iconfont-volume",fullscreenButtonSelector:"div.bilibili-player-video-btn-fullscreen button",webFullscreenButtonSelector:"div.bilibili-player-video-web-fullscreen button"})),BILIBILI_BANGUMI:new h(y.BILIBILI_BANGUMI,new g({containerSelector:"div.bpx-player-video-area",controlsSelector:".bpx-player-control-wrap",playButtonSelector:"div.squirtle-video-start",volumeButtonSelector:"div.squirtle-volume-icon",fullscreenButtonSelector:"div.squirtle-video-fullscreen",webFullscreenButtonSelector:"div.squirtle-video-pagefullscreen"})),BUYCAR5:new h(y.BUYCAR5,B.DPLAYER.copy()),DIOUS:new h(y.DIOUS,B.DPLAYER.copy()),JABLE:new h(y.JABLE,B.JABLE.copy()),JX444662:new h(y.JX444662,new g({containerSelector:"div#playerCnt",controlsSelector:"div.prism-controlbar"})),MM9842:new h(y.MM9842,new g({containerSelector:"div.jw-wrapper",controlsSelector:"div.jw-controls",volumeButtonSelector:"div.jw-icon-volume",fullscreenButtonSelector:"div.jw-icon-fullscreen"})),QINGBEIBAN:new h(y.QINGBEIBAN,B.DPLAYER.copy()),QXWK:new h(y.QXWK,B.DPLAYER.copy()),YOUTUBE_EMBED:new h(y.YOUTUBE_EMBED,new g({containerSelector:"div#player",controlsSelector:".ytp-chrome-bottom",topElementSelectors:[".ytp-pause-overlay"],playButtonSelector:"button.ytp-play-button",volumeButtonSelector:"button.ytp-mute-button",fullscreenButtonSelector:"button.ytp-fullscreen-button"})),get(e){for(let t in M)if(M[t].id===e)return M[t]}},A={"7MM":new S(y["7MM"]),MEIJUBS:new S(y.MEIJUBS),MEIJUTTB:new S(y.MEIJUTTB),MINGTIAN6:new S(y.MINGTIAN6),NEXUSMODS:new S(y.NEXUSMODS)};let v=new WeakMap;function O(e){for(let t in e){const i=e[t];if(i instanceof f&&i.test()){let e;return v.has(i)?e=v.get(i):(e=e=>{i.validateMessage(e)&&a.D.printReceiveMessage(e)},v.set(i,e)),window.addEventListener("message",e),i}}throw"No match for current site"}const _={getCurrentSite:function(){return O(y)},getCurrentVideoSite:function(){return O(M)},getCurrentVideoPortalSite:function(){return O(A)},updateEnum:async function(e="master"){if("dev"!=e&&"master"!=e)return Promise.reject("Invalid branch");const t=await a.D.gmGet(`https://raw.githubusercontent.com/maszhaowei/tampermonkey-lib/${e}/conf/site.json`,void 0,void 0,!0);let i=[];if(!n.D.isObject(t))return Promise.reject("json content is not an object");let o=t.siteids;if(n.D.isObject(o))for(let e in o)b[e]=o[e];else i.push(new TypeError("Invalid format of siteids: "+o));let r=t.sitecategories;if(n.D.isObject(r))for(let e in r)w[e]=r[e];else i.push(new TypeError("Invalid format of sitecategories: "+r));let s=t.videocategories;if(n.D.isObject(s))for(let e in s)m[e]=s[e];else i.push(new TypeError("Invalid format of videocategories: "+s));let l=t.sites;if(Array.isArray(l))for(let e of l){let t=e.id;if(!b.hasValue(t)){i.push(new Error(`Unable to find site id: ${t} in siteids`));continue}let o=new f({id:e.id,baseSiteId:e.baseSiteId,origin:e.origin,hrefRegEx:e.hrefRegEx?new RegExp(e.hrefRegEx):void 0,siteCategories:e.siteCategories,subcategories:e.subcategories,originWhitelist:e.originWhitelist,additionalInfo:e.additionalInfo}),r=y.get(t);r?n.D.assignNotEmpty(r,[o],!0,!0):y[t]=o}else i.push(new TypeError("Invalid format of sites: "+l));let c=t.videosites;if(Array.isArray(c))for(let e of c){let t=e.id,o=y.get(t);if(!o){i.push(new Error("Unable to find site: "+t));continue}let r,s=M.get(t);e.defaultPlayerMetadata&&(r=B.get(e.defaultPlayerMetadata));let a=new g({containerSelector:e.containerSelector,controlsSelector:e.controlsSelector,topElementSelectors:e.topElementSelectors,playButtonSelector:e.playButtonSelector,volumeButtonSelector:e.volumeButtonSelector,fullscreenButtonSelector:e.fullscreenButtonSelector,webFullscreenButtonSelector:e.webFullscreenButtonSelector});r&&(a=n.D.assignNotEmpty(r.copy(),[a],!0,!0)),s?n.D.assignNotEmpty(s.defaultPlayerMetadata,[a],!0,!0):M[t]=new h(o,a)}else i.push(new TypeError("Invalid format of videosites: "+c));let u=t.videoportalsites;if(Array.isArray(u))for(let e of u){let t=e.id,o=y.get(t);o?A[t]=new S(o,e.additionalInfo):i.push(new Error("Unable to find site: "+t))}else i.push(new TypeError("Invalid format of portalsites: "+u));if(!(i.length>0))return Promise.resolve();Promise.reject(i)}}})(),o})()}));