!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sitelib=t():e.sitelib=t()}(self,(function(){return(()=>{"use strict";var e={903:(e,t,r)=>{function o(e,t){if(e instanceof Array){if(!(t instanceof Array)||e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!o(e[r],t[r]))return!1;return!0}return!!Object.is(e,t)||(e instanceof class{equals(e){return this===e}}?e.equals(t):e===t)}r.d(t,{KeyboardKeyCode:()=>i,_isEqual:()=>o});class i{code;key;constructor(e,t){this.code=e,this.key=t}}Map},882:(e,t,r)=>{r.d(t,{DEFAULT_LOG_GROUP:()=>o});const o="Common"},613:(e,t,r)=>{r.d(t,{ConsoleOutputLevel:()=>i});var o=r(903);r(725),new o.KeyboardKeyCode("Space"," "),new o.KeyboardKeyCode("Enter","Enter"),new o.KeyboardKeyCode("Escape","Escape"),new o.KeyboardKeyCode("KeyC","c"),new o.KeyboardKeyCode("KeyD","d"),new o.KeyboardKeyCode("KeyF","f"),new o.KeyboardKeyCode("KeyG","g"),new o.KeyboardKeyCode("KeyI","i"),new o.KeyboardKeyCode("KeyQ","q"),new o.KeyboardKeyCode("KeyR","r"),new o.KeyboardKeyCode("KeyS","s"),new o.KeyboardKeyCode("KeyV","v"),new o.KeyboardKeyCode("KeyW","w"),new o.KeyboardKeyCode("BracketLeft","["),new o.KeyboardKeyCode("BracketRight","]"),new o.KeyboardKeyCode("ArrowLeft","ArrowLeft"),new o.KeyboardKeyCode("ArrowRight","ArrowRight"),new o.KeyboardKeyCode("ArrowUp","ArrowUp"),new o.KeyboardKeyCode("ArrowDown","ArrowDown"),new o.KeyboardKeyCode("Digit0","0"),new o.KeyboardKeyCode("Digit1","1"),new o.KeyboardKeyCode("Digit2","2"),new o.KeyboardKeyCode("Digit3","3"),new o.KeyboardKeyCode("Numpad0","0"),new o.KeyboardKeyCode("Numpad1","1"),new o.KeyboardKeyCode("Numpad2","2"),new o.KeyboardKeyCode("Numpad3","3"),new o.KeyboardKeyCode("Numpad4","4"),new o.KeyboardKeyCode("Numpad5","5"),new o.KeyboardKeyCode("Numpad6","6"),new o.KeyboardKeyCode("Numpad7","7"),new o.KeyboardKeyCode("Numpad8","8"),new o.KeyboardKeyCode("Numpad9","9"),new o.KeyboardKeyCode("F8","F8");const i={DEBUG:"debug",INFO:"info",LOG:"log",WARN:"warn",ERROR:"error"}},232:(e,t,r)=>{r.d(t,{D:()=>a});var o=r(903),i=r(882),n=r(613);const s={零:0,一:1,二:2,两:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10,百:100,千:1e3,万:1e4,亿:1e8};let a={consoleOutput(e=i.DEFAULT_LOG_GROUP,t=n.ConsoleOutputLevel.DEBUG,...r){console.group(`[${e}]`);let o=[];for(let e=0;e<r.length;e++)o.push(a.isObject(r[e])?JSON.parse(JSON.stringify(r[e])):r[e]);switch(t){case n.ConsoleOutputLevel.DEBUG:console.debug(...o);break;case n.ConsoleOutputLevel.INFO:console.info(...o);break;case n.ConsoleOutputLevel.LOG:console.log(...o);break;case n.ConsoleOutputLevel.WARN:console.warn(...o);break;case n.ConsoleOutputLevel.ERROR:console.error(...o);break;default:console.debug(...o)}console.groupEnd()},get:function(e,t,r){return new Promise(((o,i)=>{let n=new XMLHttpRequest;if(n.responseType=r||"json",n.addEventListener("load",(function(){o(this.response||this.responseText)})),n.addEventListener("error",(function(){i(this)})),n.open("GET",e),t)for(let e in t)n.setRequestHeader(e,t[e]);n.send()}))},post:function(e,t={"Content-Type":"application/x-www-form-urlencoded"},r,o){return new Promise(((i,n)=>{let s=new XMLHttpRequest;s.responseType=o||"json",s.addEventListener("load",(function(){i(this.response||this.responseText)})),s.addEventListener("error",(function(){n(this)})),s.open("POST",e);for(let e in t)s.setRequestHeader(e,t[e]);s.send(r)}))},getCookie:function(e){let t=document.cookie.replace(/\s/g,"").split(";");for(let r=0,o=t.length;r<o;r++){let o=t[r].split("=");if(o[0]==e)return decodeURIComponent(o[1])}return""},getQueryParameter:function(e){for(let[t,r]of new URLSearchParams(window.location.search).entries())if(t===e)return r},isInteger:function(e){if(isNaN(e))return!1;let t=parseFloat(e);return(0|t)===t},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isZH:function(e){return/^[\u4e00-\u9fa5]+$/.test(e)},isChineseDigits:function(e){let t=Object.keys(s);for(const r of e)if(!t.includes(r))return!1;return!0},zh2Digits:function(e){if(a.isInteger(e))return parseInt(e);if(!this.isChineseDigits(e))return;let t=0,r=1;for(let o=e.length-1;o>=0;o--){let i=s[e[o]];i>=10&&0==o?i>r?(r=i,t+=i):r*=i:i>=10?i>r?r=i:r*=i:t+=r*i}return t},digits2ZH:function(e){if(this.isZH(e))return e;if(!a.isInteger(e))return;let t=["零","一","二","三","四","五","六","七","八","九","十","百","千","万","亿"],r=e.length;return 1==r?t[e]:2==r?10==e?t[e]:e>10&&e<20?"十"+t[e.charAt(1)]:t[e.charAt(0)]+"十"+t[e.charAt(1)].replace("零",""):void 0},isHttpSuccess:function(e){return!!e&&e>=200&&e<300},getFirstTruthyMember:function(e,t){let r;return e.some((e=>(r=t[e],!!r)))?r:void 0},isObject:function(e){return"[object Object]"===Object.prototype.toString.apply(e)||e instanceof Object},isString:function(e){return e instanceof String||"string"==typeof e},isBlank:function(e){return a.isString(e)?""===e.trim():null==e},assignNotUndefined:function(e,...t){return t.forEach((t=>{Object.keys(t).forEach((r=>{let o=t[r];void 0!==o&&(e[r]=o)}))})),e},assignNotEmpty:function(e,t,r=!1,o=!1){if(!Array.isArray(t))throw new TypeError("Invalid sources");return t.forEach((t=>{Object.keys(t).forEach((i=>{let n=t[i],s=e[i];if(null!=n&&!Object.is(NaN,n))if(Array.isArray(s)){if(!Array.isArray(n))throw new TypeError(`${i} of source is not an array`);o?n.forEach((e=>{s.includes(e)||s.push(e)})):e[i]=n}else if(a.isObject(s)){if(!a.isObject(n))throw new TypeError(`${i} of source is not an object`);r?a.assignNotEmpty(s,[n],r,o):e[i]=n}else e[i]=n}))})),e},isIterable:function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},isEqual:o._isEqual,formatDate:function(e,t="MM/dd/yyyy hh:mm:ss"){e instanceof Date||(e=new Date(e));var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t}}},725:(e,t,r)=>{r.d(t,{UUID:()=>i,EnumHelper:()=>n});var o=r(232),i=r(614);class n{static#e(e){if(!o.D.isObject(e))throw new TypeError("Parameter is not an enum")}static hasValue(e,t){this.#e(e);for(let r in e)if(o.D.isEqual(e[r],t))return!0;return!1}static toValueArray(e,t="string"){this.#e(e);let r=[];for(let o in e)typeof e[o]==t&&r.push(e[o]);return r}}},614:(e,t,r)=>{var o;r.r(t),r.d(t,{NIL:()=>_,parse:()=>g,stringify:()=>c,v1:()=>I,v3:()=>A,v4:()=>O,v5:()=>D,validate:()=>a,version:()=>V});var i=new Uint8Array(16);function n(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,a=function(e){return"string"==typeof e&&s.test(e)};for(var l=[],d=0;d<256;++d)l.push((d+256).toString(16).substr(1));const c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r};var u,f,p=0,E=0;const I=function(e,t,r){var o=t&&r||0,i=t||new Array(16),s=(e=e||{}).node||u,a=void 0!==e.clockseq?e.clockseq:f;if(null==s||null==a){var l=e.random||(e.rng||n)();null==s&&(s=u=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==a&&(a=f=16383&(l[6]<<8|l[7]))}var d=void 0!==e.msecs?e.msecs:Date.now(),I=void 0!==e.nsecs?e.nsecs:E+1,g=d-p+(I-E)/1e4;if(g<0&&void 0===e.clockseq&&(a=a+1&16383),(g<0||d>p)&&void 0===e.nsecs&&(I=0),I>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=d,E=I,f=a;var h=(1e4*(268435455&(d+=122192928e5))+I)%4294967296;i[o++]=h>>>24&255,i[o++]=h>>>16&255,i[o++]=h>>>8&255,i[o++]=255&h;var y=d/4294967296*1e4&268435455;i[o++]=y>>>8&255,i[o++]=255&y,i[o++]=y>>>24&15|16,i[o++]=y>>>16&255,i[o++]=a>>>8|128,i[o++]=255&a;for(var S=0;S<6;++S)i[o+S]=s[S];return t||c(i)},g=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function h(e,t,r){function o(e,o,i,n){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof o&&(o=g(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(o),s.set(e,o.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){n=n||0;for(var a=0;a<16;++a)i[n+a]=s[a];return i}return c(s)}try{o.name=e}catch(e){}return o.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",o.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",o}function y(e){return 14+(e+64>>>9<<4)+1}function S(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function w(e,t,r,o,i,n){return S((s=S(S(t,e),S(o,n)))<<(a=i)|s>>>32-a,r);var s,a}function m(e,t,r,o,i,n,s){return w(t&r|~t&o,e,t,i,n,s)}function v(e,t,r,o,i,n,s){return w(t&o|r&~o,e,t,i,n,s)}function b(e,t,r,o,i,n,s){return w(t^r^o,e,t,i,n,s)}function M(e,t,r,o,i,n,s){return w(r^(t|~o),e,t,i,n,s)}const A=h("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,o="0123456789abcdef",i=0;i<r;i+=8){var n=e[i>>5]>>>i%32&255,s=parseInt(o.charAt(n>>>4&15)+o.charAt(15&n),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var r=1732584193,o=-271733879,i=-1732584194,n=271733878,s=0;s<e.length;s+=16){var a=r,l=o,d=i,c=n;r=m(r,o,i,n,e[s],7,-680876936),n=m(n,r,o,i,e[s+1],12,-389564586),i=m(i,n,r,o,e[s+2],17,606105819),o=m(o,i,n,r,e[s+3],22,-1044525330),r=m(r,o,i,n,e[s+4],7,-176418897),n=m(n,r,o,i,e[s+5],12,1200080426),i=m(i,n,r,o,e[s+6],17,-1473231341),o=m(o,i,n,r,e[s+7],22,-45705983),r=m(r,o,i,n,e[s+8],7,1770035416),n=m(n,r,o,i,e[s+9],12,-1958414417),i=m(i,n,r,o,e[s+10],17,-42063),o=m(o,i,n,r,e[s+11],22,-1990404162),r=m(r,o,i,n,e[s+12],7,1804603682),n=m(n,r,o,i,e[s+13],12,-40341101),i=m(i,n,r,o,e[s+14],17,-1502002290),r=v(r,o=m(o,i,n,r,e[s+15],22,1236535329),i,n,e[s+1],5,-165796510),n=v(n,r,o,i,e[s+6],9,-1069501632),i=v(i,n,r,o,e[s+11],14,643717713),o=v(o,i,n,r,e[s],20,-373897302),r=v(r,o,i,n,e[s+5],5,-701558691),n=v(n,r,o,i,e[s+10],9,38016083),i=v(i,n,r,o,e[s+15],14,-660478335),o=v(o,i,n,r,e[s+4],20,-405537848),r=v(r,o,i,n,e[s+9],5,568446438),n=v(n,r,o,i,e[s+14],9,-1019803690),i=v(i,n,r,o,e[s+3],14,-187363961),o=v(o,i,n,r,e[s+8],20,1163531501),r=v(r,o,i,n,e[s+13],5,-1444681467),n=v(n,r,o,i,e[s+2],9,-51403784),i=v(i,n,r,o,e[s+7],14,1735328473),r=b(r,o=v(o,i,n,r,e[s+12],20,-1926607734),i,n,e[s+5],4,-378558),n=b(n,r,o,i,e[s+8],11,-2022574463),i=b(i,n,r,o,e[s+11],16,1839030562),o=b(o,i,n,r,e[s+14],23,-35309556),r=b(r,o,i,n,e[s+1],4,-1530992060),n=b(n,r,o,i,e[s+4],11,1272893353),i=b(i,n,r,o,e[s+7],16,-155497632),o=b(o,i,n,r,e[s+10],23,-1094730640),r=b(r,o,i,n,e[s+13],4,681279174),n=b(n,r,o,i,e[s],11,-358537222),i=b(i,n,r,o,e[s+3],16,-722521979),o=b(o,i,n,r,e[s+6],23,76029189),r=b(r,o,i,n,e[s+9],4,-640364487),n=b(n,r,o,i,e[s+12],11,-421815835),i=b(i,n,r,o,e[s+15],16,530742520),r=M(r,o=b(o,i,n,r,e[s+2],23,-995338651),i,n,e[s],6,-198630844),n=M(n,r,o,i,e[s+7],10,1126891415),i=M(i,n,r,o,e[s+14],15,-1416354905),o=M(o,i,n,r,e[s+5],21,-57434055),r=M(r,o,i,n,e[s+12],6,1700485571),n=M(n,r,o,i,e[s+3],10,-1894986606),i=M(i,n,r,o,e[s+10],15,-1051523),o=M(o,i,n,r,e[s+1],21,-2054922799),r=M(r,o,i,n,e[s+8],6,1873313359),n=M(n,r,o,i,e[s+15],10,-30611744),i=M(i,n,r,o,e[s+6],15,-1560198380),o=M(o,i,n,r,e[s+13],21,1309151649),r=M(r,o,i,n,e[s+4],6,-145523070),n=M(n,r,o,i,e[s+11],10,-1120210379),i=M(i,n,r,o,e[s+2],15,718787259),o=M(o,i,n,r,e[s+9],21,-343485551),r=S(r,a),o=S(o,l),i=S(i,d),n=S(n,c)}return[r,o,i,n]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(y(t)),o=0;o<t;o+=8)r[o>>5]|=(255&e[o/8])<<o%32;return r}(e),8*e.length))})),O=function(e,t,r){var o=(e=e||{}).random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=o[i];return t}return c(o)};function B(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:return t^r^o;case 2:return t&r^t&o^r&o;case 3:return t^r^o}}function R(e,t){return e<<t|e>>>32-t}const D=h("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var i=0;i<o.length;++i)e.push(o.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var n=e.length/4+2,s=Math.ceil(n/16),a=new Array(s),l=0;l<s;++l){for(var d=new Uint32Array(16),c=0;c<16;++c)d[c]=e[64*l+4*c]<<24|e[64*l+4*c+1]<<16|e[64*l+4*c+2]<<8|e[64*l+4*c+3];a[l]=d}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<s;++u){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=a[u][p];for(var E=16;E<80;++E)f[E]=R(f[E-3]^f[E-8]^f[E-14]^f[E-16],1);for(var I=r[0],g=r[1],h=r[2],y=r[3],S=r[4],w=0;w<80;++w){var m=Math.floor(w/20),v=R(I,5)+B(m,g,h,y)+S+t[m]+f[w]>>>0;S=y,y=h,h=R(g,30)>>>0,g=I,I=v}r[0]=r[0]+I>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+h>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+S>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),_="00000000-0000-0000-0000-000000000000",V=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},719:(e,t,r)=>{r.d(t,{scriptName:()=>i});const o="undefined"==typeof GM_info?{name:"Tampermonkey"}:GM_info.script,i=o&&o.name},235:(e,t,r)=>{r.d(t,{MessageTypes:()=>o,EMOJIS:()=>i});const o={GENERAL:"general",SITE_INFO:"site_info",VIDEO_ATTR_INITIALIZED:"video_attr_initialized",VIDEO_READY:"video_ready",SWITCH_PLAYING_VIDEO:"switch_playing_video",REMOVE_IFRAME:"remove_iframe",READY_FOR_MESSAGE:"ready_for_message",REQUEST_WEBFULLSCREEN:"request_webfullscreen",EXIT_WEBFULLSCREEN:"exit_webfullscreen",KEYDOWN:"keydown",VIEWPORT_DIMENSION:"viewport_dimension",hasValue:function(e){if(e===o.hasValue)return!1;for(let t in o)if(this[t]===e)return!0;return!1}},i={angry:[",,Ծ‸Ծ,,","(╯‵□′)╯︵┻━┻"],happy:["=‿=✧","●ω●","(/ ▽ \\)","(=・ω・=)","(●'◡'●)ﾉ♥","<(▰˘◡˘▰)>","(⁄ ⁄•⁄ω⁄•⁄ ⁄)","(ง,,• ᴗ •,,)ง ✧",">ㅂ<ﾉ ☆"],shock:["Σ( ° △ °|||)︴","┌( ಠ_ಠ)┘","(ﾟДﾟ≡ﾟдﾟ)!?","∑(っ °Д °;)っ"],sad:["＞︿＜","＞△＜","●︿●","(´；ω；`)"],helpless:["◐▽◑","ʅ（´◔౪◔）ʃ","_(:3 」∠)_","_(┐「ε:)_","(°▽°)ﾉ","←◡←","_(•̀ᴗ•́ 」∠ ❀)_","_φ(･ω･` )"],custom:["(`･ω･´)","(^_-)-☆","༼ つ ◕_◕ ༽つ","(☞ﾟヮﾟ)☞","( ͡° ͜ʖ ͡°)","(っ˘ڡ˘ς)","(⌐■_■)","( ͡~ ͜ʖ ͡°)","(╯°□°）╯︵ ┻━┻","(͡•_ ͡• )"]}},70:(e,t,r)=>{r.d(t,{D:()=>a});var o=r(719),i=r(235),n=r(232),s=r(613);const a={debug:function(...e){n.D.consoleOutput(o.scriptName,s.ConsoleOutputLevel.DEBUG,...e)},error:function(...e){n.D.consoleOutput(o.scriptName,s.ConsoleOutputLevel.ERROR,...e)},gmGet:function(e,t,r,o=!1){return new Promise(((i,n)=>{GM_xmlhttpRequest({method:"GET",url:e,headers:t,nocache:o,responseType:r||"json",onload:e=>{i(e.response||e.responseText)},onerror:e=>{n(e)}})}))},gmPost:function(e,t,r,o){return t=t||{"Content-Type":"application/x-www-form-urlencoded"},n.D.isObject(r)&&(r=JSON.stringify(r)),new Promise(((i,n)=>{GM_xmlhttpRequest({method:"POST",url:e,headers:t,data:r,responseType:o||"json",onload:e=>{i("blob"===o?e:e.response||e.responseText)},onerror:e=>{n(e)}})}))},gmOptions:function(e,t,r){return new Promise(((o,i)=>{GM_xmlhttpRequest({method:"OPTIONS",url:e,headers:t,responseType:r||"json",onload:e=>{o(e.response||e.responseText)},onerror:e=>{i(e)}})}))},printReceiveMessage:function(e){a.debug(`>>> From: ${e.origin}, To: ${window.location.origin}, Message:`,e.data)},printSendMessage:function(e,t){a.debug(`<<< To: ${e}, From: ${window.location.origin}, Message:`,t)},randomEmoji:{}};for(let e in i.EMOJIS)a.randomEmoji[e]=()=>i.EMOJIS[e][Math.floor(Math.random()*i.EMOJIS[e].length)]}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{r.r(o),r.d(o,{Class:()=>e,Enum:()=>t,util:()=>b});var e={};r.r(e),r.d(e,{PlayerMetadata:()=>d,Site:()=>c,VideoPortalSite:()=>f,VideoSite:()=>u,_VideoCategories:()=>l});var t={};r.r(t),r.d(t,{DefaultPlayerMetadatas:()=>h,SiteCategories:()=>p,SiteIDs:()=>I,Sites:()=>g,VideoCategories:()=>E,VideoPortalSites:()=>S,VideoSites:()=>y});var i=r(232),n=r(725),s=r(235),a=r(70);const l={JAV:"JAV",TV_SERIES:"TV Series",MOVIE:"Movie"};class d{containerSelector;controlsSelector;topElementSelectors;playButtonSelector;fullscreenButtonSelector;webFullscreenButtonSelector;volumeButtonSelector;constructor({containerSelector:e,controlsSelector:t,topElementSelectors:r=[],playButtonSelector:o,volumeButtonSelector:i,fullscreenButtonSelector:n,webFullscreenButtonSelector:s}){this.containerSelector=e,this.controlsSelector=t,this.topElementSelectors=r,this.playButtonSelector=o,this.volumeButtonSelector=i,this.fullscreenButtonSelector=n,this.webFullscreenButtonSelector=s}copy(){let e=new d({});return i.D.assignNotEmpty(e,[this]),e}}class c{id;baseSiteId;#t;get uuid(){return this.#t}origin;hrefRegEx;siteCategories;originWhitelist;additionalInfo;constructor({id:e,baseSiteId:t,origin:r,hrefRegEx:o,siteCategories:i=[],originWhitelist:s=[],additionalInfo:a={}}){this.id=e,this.baseSiteId=t,this.#t=n.UUID.v4(),this.origin=r,this.hrefRegEx=o,this.siteCategories=i,this.originWhitelist=s,this.additionalInfo=a}isEmbedded(){return self!==top}isBaseSite(){return this.baseSiteId===this.id}validateMessage(e){let t=e.data;if(!(t&&t.type&&t.src&&t.srcSiteTag))return!1;let r=e.origin;return(r===window.location.origin||!!this.originWhitelist?.includes(r))&&s.MessageTypes.hasValue(t.type)&&(!t.targetSiteTag||t.targetSiteTag==this.#t)}postMessage(e,t,{type:r,content:o,targetSiteTag:i}){let n={type:r,content:o,src:window.location.href,srcSiteTag:this.#t,targetSiteTag:i};a.D.printSendMessage(t,n),e.postMessage(n,t)}test(){return this.hrefRegEx?this.hrefRegEx.test(window.location.href):!!this.origin&&this.origin==window.location.origin}}class u extends c{#r;get defaultPlayerMetadata(){return this.#r}videoCategories;constructor({id:e,baseSiteId:t,hrefRegEx:r,defaultPlayerMetadata:o,videoCategories:i=[],originWhitelist:n=[]}){super({id:e,baseSiteId:t,hrefRegEx:r,originWhitelist:n}),this.#r=o,this.videoCategories=i}getCurrentPageCategory(){let e=this.videoCategories;return 1==e.length?e[0]:e.includes(l.TV_SERIES)&&/([\u4e00-\u9fa5\w]+)(第.+季)?.*第(.+)集/.test(document.title)?l.TV_SERIES:e.includes(l.JAV)&&/([a-zA-Z]+-\d+)(-(\w+))?/.test(document.title)?l.JAV:2==e.length&&e.includes(l.MOVIE)?l.MOVIE:e}}class f extends c{videoCategories;additionalInfo;constructor({id:e,baseSiteId:t,hrefRegEx:r,videoCategories:o=[],originWhitelist:i=[],additionalInfo:n={}}){super({id:e,baseSiteId:t,hrefRegEx:r,originWhitelist:i}),this.videoCategories=o,this.additionalInfo=n}getCurrentPageCategory(){let e=this.videoCategories;return 1==e.length?e[0]:e.includes(l.TV_SERIES)&&/([\u4e00-\u9fa5\w]+)(第.+季)?.*第(.+)集/.test(document.title)?l.TV_SERIES:e.includes(l.JAV)&&/([a-zA-Z]+-\d+)(-(\w+))?/.test(document.title)?l.JAV:2==e.length&&e.includes(l.MOVIE)?l.MOVIE:e}}const p={DATABASE:"Database",DICTIONARY:"Dictionary",GAMING:"Gaming",IMAGE_HOSTING:"Image Hosting",JAV:"JAV",LIVE_STREAMING:"Live Streaming",VIDEO_HOSTING:"Video Hosting",VIDEO_SHARING:"Video Sharing",VIDEO_STREAMING:"Video Streaming"},E=l,I={"7MM":"7MM","7MM_VIDEO":"7MM_VIDEO",AVGLE:"AVGLE",AVGLE_VIDEO:"AVGLE_VIDEO",AVGLE_EMBED:"AVGLE_EMBED",BILIBILI:"BILIBILI",BILIBILI_VIDEO:"BILIBILI_VIDEO",BILIBILI_BANGUMI:"BILIBILI_BANGUMI",BILIBILI_LIVE:"BILIBILI_LIVE",BUYCAR5:"BUYCAR5",BUYCAR5_VIDEO:"BUYCAR5_VIDEO",DIOUS:"DIOUS",DIOUS_VIDEO:"DIOUS_VIDEO",JABLE:"JABLE",JABLE_VIDEO:"JABLE_VIDEO",JAVLIBRARY:"JAVLIBRARY",JX444662:"JX444662",JX444662_VIDEO:"JX444662_VIDEO",MEIJUBS:"MEIJUBS",MEIJUBS_VIDEO:"MEIJUBS_VIDEO",MEIJUTTB:"MEIJUTTB",MINGTIAN6:"MINGTIAN6",MM9842:"MM9842",MM9842_VIDEO:"MM9842_VIDEO",NEXUSMODS:"NEXUSMODS",NEXUSMODS_MODPAGE:"NEXUSMODS_MODPAGE",QINGBEIBAN:"QINGBEIBAN",QXWK:"QXWK",QXWK_VIDEO:"QXWK_VIDEO",STEAM_COMMUNITY:"STEAM_COMMUNITY",STEAM_COMMUNITY_REVIEW:"STEAM_COMMUNITY_REVIEW",STEAM_STORE:"STEAM_STORE",WALLHAVEN:"WALLHAVEN",WUKONGMEIJU:"WUKONGMEIJU",YOUTUBE:"Youtube",YOUTUBE_EMBED:"YOUTUBE_EMBED",hasValue(e){for(let t in I)if(I[t]===e)return!0;return!1}},g={"7MM":new c({id:I["7MM"],baseSiteId:I["7MM"],origin:"https://7mmtv.tv",hrefRegEx:/^https:\/\/7mmtv\.tv\/.*/,siteCategories:[p.JAV,p.VIDEO_STREAMING]}),AVGLE:new c({id:I.AVGLE,baseSiteId:I.AVGLE,origin:"https://avgle.com",hrefRegEx:/^https:\/\/avgle\.com\/video\/\w+/,siteCategories:[p.JAV,p.VIDEO_SHARING]}),BILIBILI:new c({id:I.BILIBILI,baseSiteId:I.BILIBILI,origin:"https://www.bilibili.com",hrefRegEx:/^https:\/\/www\.bilibili\.com\/.*/,siteCategories:[p.VIDEO_SHARING]}),BILIBILI_LIVE:new c({id:I.BILIBILI_LIVE,baseSiteId:I.BILIBILI,origin:"https://live.bilibili.com",hrefRegEx:/^https:\/\/live\.bilibili\.com\/.*/,siteCategories:[p.LIVE_STREAMING]}),BUYCAR5:new c({id:I.BUYCAR5,baseSiteId:I.BUYCAR5,origin:"https://vod3.buycar5.cn",hrefRegEx:/^https:\/\/vod\d+\.buycar5\.cn/,siteCategories:[p.VIDEO_HOSTING]}),DIOUS:new c({id:I.DIOUS,baseSiteId:I.DIOUS,origin:"https://v7.dious.cc",hrefRegEx:/^https:\/\/v7.dious.cc/,siteCategories:[p.VIDEO_HOSTING]}),JABLE:new c({id:I.JABLE,baseSiteId:I.JABLE,origin:"https://jable.tv",hrefRegEx:/^https:\/\/jable.tv/,siteCategories:[p.JAV,p.VIDEO_SHARING]}),JAVLIBRARY:new c({id:I.JAVLIBRARY,baseSiteId:I.JAVLIBRARY,origin:"https://www.javlibrary.com",hrefRegEx:/^https:\/\/www\.javlibrary\.com\/.*/,siteCategories:[p.JAV,p.DATABASE]}),JX444662:new c({id:I.JX444662,baseSiteId:I.JX444662,origin:"https://jx.444662.cn",hrefRegEx:/^https:\/\/jx.444662.cn/,siteCategories:[p.VIDEO_HOSTING]}),MEIJUBS:new c({id:I.MEIJUBS,baseSiteId:I.MEIJUBS,origin:"https://www.meijubs.com",siteCategories:[p.VIDEO_STREAMING]}),MM9842:new c({id:I.MM9842,baseSiteId:I.MM9842,origin:"https://mm9842.com",hrefRegEx:/^https:\/\/mm9842.com/,siteCategories:[p.VIDEO_HOSTING]}),NEXUSMODS:new c({id:I.NEXUSMODS,baseSiteId:I.NEXUSMODS,origin:"https://www.nexusmods.com",siteCategories:[p.GAMING]}),QXWK:new c({id:I.QXWK,baseSiteId:I.QXWK,origin:"https://code.qxwk.net",hrefRegEx:/^https:\/\/code.qxwk.net/,siteCategories:[p.VIDEO_HOSTING]}),STEAM_COMMUNITY_REVIEW:new c({id:I.STEAM_COMMUNITY_REVIEW,baseSiteId:I.STEAM_COMMUNITY,origin:"https://steamcommunity.com",hrefRegEx:/^https:\/\/steamcommunity\.com\/app\/\d+\/reviews\/.+/,siteCategories:[p.GAMING]}),STEAM_STORE:new c({id:I.STEAM_STORE,baseSiteId:I.STEAM_STORE,origin:"https://store.steampowered.com",hrefRegEx:/^https:\/\/store\.steampowered\.com\/.*/,siteCategories:[p.GAMING]}),WALLHAVEN:new c({id:I.WALLHAVEN,baseSiteId:I.WALLHAVEN,origin:"https://wallhaven.cc",hrefRegEx:/^https:\/\/wallhaven\.cc\/.*/,siteCategories:[p.IMAGE_HOSTING]}),WUKONGMEIJU:new c({id:I.WUKONGMEIJU,baseSiteId:I.WUKONGMEIJU,origin:"https://m.wukongmeiju.com",siteCategories:[p.VIDEO_STREAMING],originWhitelist:["https://code.qxwk.net"]}),YOUTUBE:new c({id:I.YOUTUBE,baseSiteId:I.YOUTUBE,origin:"https://www.youtube.com",siteCategories:[p.VIDEO_SHARING]}),get(e){let t;for(let r in g){let o=g[r];if(o instanceof c&&o.id===e){if(!o.isBaseSite())return o;t||(t=o)}}return t}},h={AVLGE:new d({containerSelector:"div#video-player",controlsSelector:"div.vjs-control-bar",playButtonSelector:"button.vjs-play-control",fullscreenButtonSelector:"button.vjs-fullscreen-control",topElementSelectors:[".vjs-related-carousel-holder"]}),DPLAYER:new d({containerSelector:"div#dplayer,div#mvideo,#dpplayer",controlsSelector:".dplayer-controller",playButtonSelector:"button.dplayer-play-icon",volumeButtonSelector:"button.dplayer-volume-icon",fullscreenButtonSelector:"button.dplayer-full-icon",webFullscreenButtonSelector:".dplayer-full-in-icon"}),JABLE:new d({containerSelector:"div.plyr.plyr--video",controlsSelector:"div.plyr__controls",volumeButtonSelector:"button[data-plyr=mute]",fullscreenButtonSelector:"button[data-plyr=fullscreen]"}),PRISM:new d({containerSelector:"#playerCnt",controlsSelector:".prism-controlbar",playButtonSelector:".prism-play-btn",fullscreenButtonSelector:".prism-fullscreen-btn"}),get(e){for(let t in h)if(t===e)return h[t]}},y={AVGLE_VIDEO:new u({id:I.AVGLE_VIDEO,baseSiteId:I.AVGLE,hrefRegEx:/^https:\/\/avgle\.com\/video\/\w+/,defaultPlayerMetadata:h.AVLGE.copy(),videoCategories:[E.JAV],originWhitelist:["https://7mmtv.tv"]}),AVGLE_EMBED:new u({id:I.AVGLE_EMBED,baseSiteId:I.AVGLE,hrefRegEx:/^https:\/\/avgle\.com\/embed\/\w+$/,defaultPlayerMetadata:h.AVLGE.copy(),videoCategories:[E.JAV],originWhitelist:["https://7mmtv.tv"]}),BILIBILI_VIDEO:new u({id:I.BILIBILI_VIDEO,baseSiteId:I.BILIBILI,hrefRegEx:/^https:\/\/www\.bilibili\.com\/video\/.+/,defaultPlayerMetadata:new d({containerSelector:"div.bilibili-player-video-wrap",controlsSelector:".bilibili-player-video-control-wrap",playButtonSelector:"div.bilibili-player-video-btn-start",volumeButtonSelector:"button.bilibili-player-iconfont-volume",fullscreenButtonSelector:"div.bilibili-player-video-btn-fullscreen button",webFullscreenButtonSelector:"div.bilibili-player-video-web-fullscreen button"})}),BILIBILI_BANGUMI:new u({id:I.BILIBILI_BANGUMI,baseSiteId:I.BILIBILI,hrefRegEx:/^https:\/\/www\.bilibili\.com\/bangumi\/play\/.+/,defaultPlayerMetadata:new d({containerSelector:"div.bpx-player-video-area",controlsSelector:".bpx-player-control-wrap",playButtonSelector:"div.squirtle-video-start",volumeButtonSelector:"div.squirtle-volume-icon",fullscreenButtonSelector:"div.squirtle-video-fullscreen",webFullscreenButtonSelector:"div.squirtle-video-pagefullscreen"})}),BUYCAR5_VIDEO:new u({id:I.BUYCAR5_VIDEO,baseSiteId:I.BUYCAR5,hrefRegEx:/^https:\/\/vod\d+\.buycar5\.cn/,defaultPlayerMetadata:h.DPLAYER.copy(),originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),DIOUS_VIDEO:new u({id:I.DIOUS_VIDEO,baseSiteId:I.DIOUS,hrefRegEx:/^https:\/\/v7.dious.cc/,defaultPlayerMetadata:h.DPLAYER.copy(),originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),JABLE_VIDEO:new u({id:I.JABLE_VIDEO,baseSiteId:I.JABLE,hrefRegEx:/^https:\/\/jable.tv\/videos\/.+/,defaultPlayerMetadata:h.JABLE.copy(),videoCategories:[E.JAV]}),JX444662_VIDEO:new u({id:I.JX444662_VIDEO,baseSiteId:I.JX444662,hrefRegEx:/^https:\/\/jx.444662.cn/,defaultPlayerMetadata:new d({containerSelector:"div#playerCnt",controlsSelector:"div.prism-controlbar"}),originWhitelist:["https://www.meijuttb.com","https://www.meijubs.com"]}),MM9842_VIDEO:new u({id:I.MM9842_VIDEO,baseSiteId:I.MM9842,hrefRegEx:/^https:\/\/mm9842.com/,defaultPlayerMetadata:new d({containerSelector:"div.jw-wrapper",controlsSelector:"div.jw-controls",volumeButtonSelector:"div.jw-icon-volume",fullscreenButtonSelector:"div.jw-icon-fullscreen"}),originWhitelist:["https://7mmtv.tv"]}),QXWK_VIDEO:new u({id:I.QXWK_VIDEO,baseSiteId:I.QXWK,hrefRegEx:/^https:\/\/code.qxwk.net/,defaultPlayerMetadata:h.DPLAYER.copy(),originWhitelist:["https://m.wukongmeiju.com"]}),YOUTUBE_EMBED:new u({id:I.YOUTUBE_EMBED,baseSiteId:I.YOUTUBE,hrefRegEx:/^https:\/\/www.youtube.com\/embed\/[\w-]+$/,defaultPlayerMetadata:new d({containerSelector:"div#player",controlsSelector:".ytp-chrome-bottom",topElementSelectors:[".ytp-pause-overlay"],playButtonSelector:"button.ytp-play-button",volumeButtonSelector:"button.ytp-mute-button",fullscreenButtonSelector:"button.ytp-fullscreen-button"}),originWhitelist:["https://www.nexusmods.com"]}),get(e){for(let t in y)if(y[t].id===e)return y[t]}},S={"7MM":new f({id:I["7MM_VIDEO"],baseSiteId:I["7MM"],hrefRegEx:/^https:\/\/7mmtv\.tv\/.+/,videoCategories:[E.JAV],originWhitelist:["https://mm9842.com","https://avgle.com"]}),MEIJUBS_VIDEO:new f({id:I.MEIJUBS_VIDEO,baseSiteId:I.MEIJUBS,hrefRegEx:/^https:\/\/www\.meijubs\.com\/play\/.+/,videoCategories:[E.TV_SERIES],originWhitelist:["https://vod3.buycar5.cn","https://jx.444662.cn","https://vod4.buycar5.cn","https://v7.dious.cc"]}),NEXUSMODS:new f({id:I.NEXUSMODS_MODPAGE,baseSiteId:I.NEXUSMODS,hrefRegEx:/^https:\/\/www\.nexusmods\.com\/[^/]+\/mods\/\d+/,videoCategories:[p.GAMING],originWhitelist:["https://www.youtube.com"]}),get(e){for(let t in S)if(S[t].id===e)return S[t]}};let w=new WeakMap;function m(e){let t;w.has(e)?t=w.get(e):(t=t=>{e.validateMessage(t)&&a.D.printReceiveMessage(t)},w.set(e,t)),window.addEventListener("message",t)}function v(e){let t;for(let r in e){const o=e[r];if(o instanceof c&&o.test()){if(!o.isBaseSite())return m(o),o;t||(t=o)}}if(t)return m(t),t;throw"No match for current site"}const b={getCurrentSite:function(){return v(g)},getCurrentVideoSite:function(){return v(y)},getCurrentVideoPortalSite:function(){return v(S)},updateRemoteSiteConfig:async function(e="master"){if("dev"!=e&&"master"!=e)return Promise.reject("Invalid branch");const t=await a.D.gmGet(`https://raw.githubusercontent.com/maszhaowei/tampermonkey-lib/${e}/conf/site.json`,void 0,void 0,!0);let r=[];if(!i.D.isObject(t))return Promise.reject("json content is not an object");let o=t.siteids;if(i.D.isObject(o))for(let e in o)I[e]=o[e];else r.push(new TypeError("Invalid format of siteids: "+o));let n=t.sitecategories;if(i.D.isObject(n))for(let e in n)p[e]=n[e];else r.push(new TypeError("Invalid format of sitecategories: "+n));let s=t.videocategories;if(i.D.isObject(s))for(let e in s)E[e]=s[e];else r.push(new TypeError("Invalid format of videocategories: "+s));let l=t.sites;if(Array.isArray(l))for(let e of l){let t=e.id;if(!I.hasValue(t)){r.push(new Error(`Unable to find site id: ${t} in siteids`));continue}let o=new c({id:e.id,baseSiteId:e.baseSiteId,origin:e.origin,hrefRegEx:e.hrefRegEx?new RegExp(e.hrefRegEx):void 0,siteCategories:e.siteCategories,originWhitelist:e.originWhitelist,additionalInfo:e.additionalInfo}),n=g.get(t);n?i.D.assignNotEmpty(n,[o],!0,!0):g[t]=o}else r.push(new TypeError("Invalid format of sites: "+l));let w=t.videosites;if(Array.isArray(w))for(let e of w){let t;e.playerMetadataTemplate&&(t=h.get(e.playerMetadataTemplate));let r=new d({containerSelector:e.containerSelector,controlsSelector:e.controlsSelector,topElementSelectors:e.topElementSelectors,playButtonSelector:e.playButtonSelector,volumeButtonSelector:e.volumeButtonSelector,fullscreenButtonSelector:e.fullscreenButtonSelector,webFullscreenButtonSelector:e.webFullscreenButtonSelector});t&&(r=i.D.assignNotEmpty(t.copy(),[r],!0,!0));let o=e.id,n=y.get(o);n?(i.D.assignNotEmpty(n.defaultPlayerMetadata,[r],!0,!0),i.D.assignNotEmpty(n.videoCategories,e.videoCategories,!1,!0)):y[o]=new u({id:e.id,baseSiteId:e.baseSiteId,hrefRegEx:e.hrefRegEx?new RegExp(e.hrefRegEx):void 0,defaultPlayerMetadata:r,videoCategories:e.videoCategories,originWhitelist:e.originWhitelist})}else r.push(new TypeError("Invalid format of videosites: "+w));let m=t.videoportalsites;if(Array.isArray(m))for(let e of m){let t=e.id,r=S.get(t);r?i.D.assignNotEmpty(r.videoCategories,e.videoCategories,!1,!0):S[t]=new f({id:e.id,baseSiteId:e.baseSiteId,hrefRegEx:e.hrefRegEx?new RegExp(e.hrefRegEx):void 0,videoCategories:e.siteCategories,originWhitelist:e.originWhitelist,additionalInfo:e.additionalInfo})}else r.push(new TypeError("Invalid format of video portal sites: "+m));if(!(r.length>0))return Promise.resolve();Promise.reject(r)}}})(),o})()}));