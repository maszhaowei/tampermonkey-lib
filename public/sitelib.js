!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.sitelib=t():e.sitelib=t()}(self,(function(){return(()=>{"use strict";var e={941:(e,t,i)=>{i.d(t,{ObjectCacheHelper:()=>r});class o{context;fn;args;constructor(e,t,i){this.fn=e,this.context=t,this.args=i||[]}}class r{#e;static#t=new WeakMap;constructor(){}static save(e,t,i,n){let s;r.#t.has(e)?s=r.#t.get(e):(s=new Map,r.#t.set(e,s)),s.set(t,new o(i,e,n))}static restore(e,t,i=!1){let o=r.#t.get(e);if(o){let n=o.get(t);return n&&n.fn.apply(n.context,n.args),i&&(o.delete(t),0==o.size&&r.#t.delete(e)),!!n}return!1}}},882:(e,t,i)=>{i.d(t,{DEFAULT_LOG_GROUP:()=>o});const o="Common"},232:(e,t,i)=>{i.d(t,{D:()=>r});var o=i(882);let r={printGroupDebug:function(e=o.DEFAULT_LOG_GROUP,...t){console.group(`[${e}]`);let i=[];for(let e=0;e<t.length;e++)i.push(r.isObject(t[e])?JSON.parse(JSON.stringify(t[e])):t[e]);console.debug(...i),console.groupEnd()},getCookie:function(e){let t=document.cookie.replace(/\s/g,"").split(";");for(let i=0,o=t.length;i<o;i++){let o=t[i].split("=");if(o[0]==e)return decodeURIComponent(o[1])}return""},getQueryVariable:function(e){let t=window.location.search.substring(1).split("&");for(let i=0;i<t.length;i++){let o=t[i].split("=");if(o[0]==e)return o[1]}return!1},asyncDelayedFn:function(e,t,i,o=0){return new Promise(((r,n)=>setTimeout((()=>{void 0===i?r(t.apply(e)):Array.isArray(i)?r(t.apply(e,i)):n(i),r(!0)}),o)))},isInteger:function(e){if(isNaN(e))return!1;let t=parseFloat(e);return(0|t)===t},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isZH:function(e){return/^[\u4e00-\u9fa5]+$/.test(e)},isChineseDigits:function(e){let t=Object.keys(this._common_used_numerals);for(const i of e)if(!t.includes(i))return!1;return!0},zh2Digits:function(e){if(r.isInteger(e))return e;if(!this.isChineseDigits(e))return;let t=0,i=1;for(let o=e.length-1;o>=0;o--){let r=this._common_used_numerals[e[o]];r>=10&&0==o?r>i?(i=r,t+=r):i*=r:r>=10?r>i?i=r:i*=r:t+=i*r}return t},digits2ZH:function(e){if(this.isZH(e))return e;if(!r.isInteger(e))return;let t=["零","一","二","三","四","五","六","七","八","九","十","百","千","万","亿"];var i=e.length;return 1==i?t[e]:2==i?10==e?t[e]:e>10&&e<20?"十"+t[e.charAt(1)]:t[e.charAt(0)]+"十"+t[e.charAt(1)].replace("零",""):void 0},isHttpSuccess:function(e){return!!e&&e>=200&&e<300},anyMemberNotEmpty:function(e,t){let i;return e.some((e=>(i=t[e],!!i))),i},isObject:function(e){return"[object Object]"===Object.prototype.toString.apply(e)||e instanceof Object},isString:function(e){return e instanceof String||"string"==typeof e},isBlank:function(e){return r.isString(e)?""===e.trim():null==e},assignNotUndefined:function(e,...t){return t.forEach((t=>{Object.keys(t).forEach((i=>{let o=t[i];void 0!==o&&(e[i]=o)}))})),e}}},347:(e,t,i)=>{i.r(t),i.d(t,{SiteCategory:()=>s,PlayerMetadata:()=>a,Site:()=>l,VideoSite:()=>c,VideoPortalSite:()=>u});var o=i(941),r=i(235),n=i(70);class s{categoryName;titleRegEx;constructor(e,t){this.categoryName=e,this.titleRegEx=t}}class a{#i;get containerSelector(){return this.#i}#o;get controlsSelector(){return this.#o}#r;get topElementSelectors(){return this.#r}#n;get playButtonSelector(){return this.#n}#s;get fullscreenButtonSelector(){return this.#s}#a;get webFullscreenButtonSelector(){return this.#a}#l;get volumeButtonSelector(){return this.#l}constructor(e,t,i,o,r,n,s){this.#i=e,this.#o=t,this.#r=i,this.#n=o,this.#l=r,this.#s=n,this.#a=s}}class l{#c;get id(){return this.#c}#u;get origin(){return this.#u}#d;get hrefRegEx(){return this.#d}#p;get siteCategories(){return this.#p}#I;get originWhitelist(){return this.#I}constructor(e,t,i,o,r=[]){this.#c=e,this.#u=t,this.#d=i,this.#p=o,this.#I=r,window.addEventListener("message",(e=>{this.isMessageOriginAllowed(e.origin)&&this.isFromTampermonkey(e)&&n.D.printReceiveMessage(e)}))}isEmbedded(){return self!==top}isMessageOriginAllowed(e){return!!e&&(e===window.location.origin||this.#I.includes(e))}postMessage(e,t,i,o,r=!1){if(!t||!r&&e===self)return;let s={type:t,content:i,src:window.location.href};n.D.printSendMessage(o,s),e.postMessage(s,o)}test(){return this.#d?this.#d.test(window.location.href):this.#u?this.#u==window.location.origin:void 0}isFromTampermonkey(e){return e.data&&r.MessageTypes.test(e.data.type)}}class c extends l{#w;get parent(){return this.#w}#E;get defaultPlayerMetadata(){return this.#E}constructor(e,t){super(e.id,e.origin,e.hrefRegEx,e.siteCategories,e.originWhitelist),this.#w=e,this.#E=t}}class u extends l{constructor(e){super(e.id,e.origin,e.hrefRegEx,e.siteCategories,e.originWhitelist),window.addEventListener("message",(e=>{if(this.isFromTampermonkey(e))switch(e.data.type){case r.MessageTypes.REQUEST_WEBFULLSCREEN:this.#S();break;case r.MessageTypes.EXIT_WEBFULLSCREEN:this.#h()}}))}#S(){let e=document.documentElement,t=window.getComputedStyle(e).getPropertyValue("overflow");o.ObjectCacheHelper.save(e,"overflow",(()=>e.style.overflow=t)),o.ObjectCacheHelper.save(e,"scroll",HTMLElement.prototype.scrollTo,[e.scrollLeft,e.scrollTop]),document.documentElement.style.overflow="hidden"}#h(){o.ObjectCacheHelper.restore(document.documentElement,"overflow"),o.ObjectCacheHelper.restore(document.documentElement,"scroll")}}},425:(e,t,i)=>{i.r(t),i.d(t,{SiteCategories:()=>r,SiteIDs:()=>n,Sites:()=>s,VideoSites:()=>c,VideoPortalSites:()=>u});var o=i(347);const r={AV:new o.SiteCategory("AV",/([a-zA-Z]+-\d+)(-(\w+))?/),DB:new o.SiteCategory("DB"),GAME:new o.SiteCategory("Game"),IMAGE_HOSTING:new o.SiteCategory("Image Hosting"),LIVE_STREAMING:new o.SiteCategory("Live Streaming"),MODDING:new o.SiteCategory("Modding"),MOVIE:new o.SiteCategory("Movie"),TV_SERIES:new o.SiteCategory("TV Series",/([\u4e00-\u9fa5\w]+)第(.+)季.*第(.+)集/),VIDEO_HOSTING:new o.SiteCategory("Video Hosting"),VIDEO_SHARING:new o.SiteCategory("Video Sharing")},n={"7MM":"7MM",AVGLE:"AVGLE",AVGLE_EMBED:"AVGLE_EMBED",BILIBILI:"BILIBILI",BILIBILI_VIDEO:"BILIBILI_VIDEO",BILIBILI_BANGUMI:"BILIBILI_BANGUMI",BILIBILI_LIVE:"BILIBILI_LIVE",BUYCAR5:"BUYCAR5",DIOUS:"DIOUS",JABLE:"JABLE",JAVLIBRARY:"JAVLIBRARY",JX444662:"JX444662",MEIJUBS:"MEIJUBS",MEIJUTTB:"MEIJUTTB",MINGTIAN6:"MINGTIAN6",MM9842:"MM9842",NEXUSMODS:"NEXUSMODS",QINGBEIBAN:"QINGBEIBAN",QXWK:"QXWK",STEAM_COMMUNITY_REVIEW:"STEAM_COMMUNITY_REVIEW",STEAM_STORE:"STEAM_STORE",WALLHAVEN:"WALLHAVEN",WUKONGMEIJU:"WUKONGMEIJU",YOUTUBE_EMBED:"YOUTUBE_EMBED"},s={"7MM":new o.Site(n["7MM"],"https://7mmtv.tv",/^https:\/\/7mmtv\.tv\/.*/,[r.AV],["https://mm9842.com","https://avgle.com"]),AVGLE:new o.Site(n.AVGLE,"https://avgle.com",/^https:\/\/avgle\.com\/video\/\w+/,[r.AV],["https://7mmtv.tv"]),AVGLE_EMBED:new o.Site(n.AVGLE_EMBED,"https://avgle.com",/^https:\/\/avgle\.com\/embed\/\w+$/,[r.AV],["https://7mmtv.tv"]),BILIBILI:new o.Site(n.BILIBILI,"https://www.bilibili.com",/^https:\/\/www\.bilibili\.com\/.*/,[r.VIDEO_SHARING]),BILIBILI_BANGUMI:new o.Site(n.BILIBILI_BANGUMI,"https://www.bilibili.com",/^https:\/\/www\.bilibili\.com\/bangumi\/play\/.+/,[r.VIDEO_SHARING]),BILIBILI_LIVE:new o.Site(n.BILIBILI_LIVE,"https://live.bilibili.com",/^https:\/\/live\.bilibili\.com\/.*/,[r.LIVE_STREAMING]),BILIBILI_VIDEO:new o.Site(n.BILIBILI_VIDEO,"https://www.bilibili.com",/^https:\/\/www\.bilibili\.com\/video\/.+/,[r.VIDEO_SHARING]),BUYCAR5:new o.Site(n.BUYCAR5,"https://vod3.buycar5.cn",/^https:\/\/vod\d+\.buycar5\.cn/,[r.VIDEO_HOSTING],["https://www.meijuttb.com","https://www.meijubs.com"]),DIOUS:new o.Site(n.DIOUS,"https://v7.dious.cc",/^https:\/\/v7.dious.cc/,[r.VIDEO_HOSTING],["https://www.meijuttb.com","https://www.meijubs.com"]),JABLE:new o.Site(n.JABLE,"https://jable.tv",/^https:\/\/jable.tv/,[r.AV]),JAVLIBRARY:new o.Site(n.JAVLIBRARY,"https://www.javlibrary.com",/^https:\/\/www\.javlibrary\.com\/.*/,[r.AV]),JX444662:new o.Site(n.JX444662,"https://jx.444662.cn",/^https:\/\/jx.444662.cn/,[r.VIDEO_HOSTING],["https://www.meijuttb.com","https://www.meijubs.com"]),MEIJUBS:new o.Site(n.MEIJUBS,"https://www.meijubs.com",void 0,[r.TV_SERIES],["https://vod3.buycar5.cn","https://jx.444662.cn","https://vod4.buycar5.cn","https://v7.dious.cc"]),MEIJUTTB:new o.Site(n.MEIJUTTB,"https://www.meijuttb.com",void 0,[r.TV_SERIES],["https://vod3.buycar5.cn","https://jx.444662.cn","https://vod4.buycar5.cn"]),MINGTIAN6:new o.Site(n.MINGTIAN6,"https://www.mingtian6.com",void 0,[r.TV_SERIES],["https://www.qingbeiban.com"]),MM9842:new o.Site(n.MM9842,"https://mm9842.com",/^https:\/\/mm9842.com/,[r.AV],["https://7mmtv.tv"]),NEXUSMODS:new o.Site(n.NEXUSMODS,"https://www.nexusmods.com",void 0,[r.MODDING],["https://www.youtube.com"]),QINGBEIBAN:new o.Site(n.QINGBEIBAN,"https://www.qingbeiban.com",/^https:\/\/www.qingbeiban.com/,[r.VIDEO_HOSTING],["https://www.mingtian6.com"]),QXWK:new o.Site(n.QXWK,"https://code.qxwk.net",/^https:\/\/code.qxwk.net/,[r.VIDEO_HOSTING],["https://m.wukongmeiju.com"]),STEAM_COMMUNITY_REVIEW:new o.Site(n.STEAM_COMMUNITY_REVIEW,"https://steamcommunity.com",/^https:\/\/steamcommunity\.com\/app\/\d+\/reviews\/.+/,[r.GAME]),STEAM_STORE:new o.Site(n.STEAM_STORE,"https://store.steampowered.com",/^https:\/\/store\.steampowered\.com\/.*/,[r.GAME]),WALLHAVEN:new o.Site(n.WALLHAVEN,"https://wallhaven.cc",/^https:\/\/wallhaven\.cc\/.*/,[r.IMAGE_HOSTING]),WUKONGMEIJU:new o.Site(n.WUKONGMEIJU,"https://m.wukongmeiju.com",void 0,[r.TV_SERIES],["https://code.qxwk.net"]),YOUTUBE_EMBED:new o.Site(n.YOUTUBE_EMBED,"https://www.youtube.com",/^https:\/\/www.youtube.com\/embed\/[\w-]+$/,[r.VIDEO_SHARING],["https://www.nexusmods.com"])};let a=["div#video-player","div.vjs-control-bar",void 0,"button.vjs-play-control",void 0,"button.vjs-fullscreen-control"],l=["div#dplayer, div#mvideo",void 0,"button.dplayer-play-icon","button.dplayer-volume-icon","button.dplayer-full-icon"];const c={AVGLE:new o.VideoSite(s.AVGLE,new o.PlayerMetadata(...a)),AVGLE_EMBED:new o.VideoSite(s.AVGLE_EMBED,new o.PlayerMetadata(...a)),BILIBILI_VIDEO:new o.VideoSite(s.BILIBILI_VIDEO,new o.PlayerMetadata("div.bilibili-player-video-wrap",".bilibili-player-video-control-wrap",void 0,"div.bilibili-player-video-btn-start","button.bilibili-player-iconfont-volume","div.bilibili-player-video-btn-fullscreen button","div.bilibili-player-video-web-fullscreen button")),BILIBILI_BANGUMI:new o.VideoSite(s.BILIBILI_BANGUMI,new o.PlayerMetadata("div.bpx-player-video-area",".bpx-player-control-wrap",void 0,"div.squirtle-video-start","div.squirtle-volume-icon","div.squirtle-video-fullscreen","div.squirtle-video-pagefullscreen")),BUYCAR5:new o.VideoSite(s.BUYCAR5,new o.PlayerMetadata(...l)),DIOUS:new o.VideoSite(s.DIOUS,new o.PlayerMetadata(...l)),JABLE:new o.VideoSite(s.JABLE,new o.PlayerMetadata("div.plyr.plyr--video","div.plyr__controls",void 0,void 0,"button[data-plyr=mute]","button[data-plyr=fullscreen]")),JX444662:new o.VideoSite(s.JX444662,new o.PlayerMetadata("div#playerCnt","div.prism-controlbar",void 0)),MM9842:new o.VideoSite(s.MM9842,new o.PlayerMetadata("div.jw-wrapper","div.jw-controls",void 0,void 0,"div.jw-icon-volume","div.jw-icon-fullscreen")),QINGBEIBAN:new o.VideoSite(s.QINGBEIBAN,new o.PlayerMetadata(...l)),QXWK:new o.VideoSite(s.QXWK,new o.PlayerMetadata(...l)),YOUTUBE_EMBED:new o.VideoSite(s.YOUTUBE_EMBED,new o.PlayerMetadata("div#player",".ytp-chrome-bottom",[".ytp-pause-overlay"],"button.ytp-play-button","button.ytp-mute-button","button.ytp-fullscreen-button"))},u={"7MM":new o.VideoPortalSite(s["7MM"]),MEIJUBS:new o.VideoPortalSite(s.MEIJUBS),MEIJUTTB:new o.VideoPortalSite(s.MEIJUTTB),MINGTIAN6:new o.VideoPortalSite(s.MINGTIAN6),NEXUSMODS:new o.VideoPortalSite(s.NEXUSMODS)}},769:(e,t,i)=>{i.d(t,{D:()=>n});var o=i(425);function r(e){for(let t in e){const i=e[t];if(i.test())return i}throw"No match for current site"}const n={getCurrentSite:function(){return r(o.Sites)},getCurrentVideoSite:function(){return r(o.VideoSites)},getCurrentVideoPortalSite:function(){return r(o.VideoPortalSites)},getCurrentPageCategory:function(e){let t=(e=e||n.getCurrentSite()).siteCategories;if(!Array.isArray(t)||0==t.length)throw"Site categories is empty.";return 1==t.length?t[0]:t.includes(o.SiteCategories.TV_SERIES)&&o.SiteCategories.TV_SERIES.titleRegEx.test(document.title)?t.TV_SERIES:t&&t.includes(o.SiteCategories.MOVIE)?o.SiteCategories.MOVIE:void 0}}},719:(e,t,i)=>{i.d(t,{scriptName:()=>r});const o="undefined"==typeof GM_info?{name:"Tampermonkey"}:GM_info.script,r=o&&o.name},235:(e,t,i)=>{i.d(t,{MessageTypes:()=>o});const o={GENERAL:"general",SITE_INFO:"site_info",VIDEO_ATTR_INITIALIZED:"video_attr_initialized",VIDEO_READY:"video_ready",SWITCH_PLAYING_VIDEO:"switch_playing_video",READY_FOR_MESSAGE:"ready_for_message",REQUEST_WEBFULLSCREEN:"request_webfullscreen",EXIT_WEBFULLSCREEN:"exit_webfullscreen",KEYDOWN:"keydown",test:function(e){for(let t in o)if(this[t]===e)return!0;return!1}}},70:(e,t,i)=>{i.d(t,{D:()=>n});var o=i(719),r=i(232);const n={debug:function(...e){r.D.printGroupDebug(o.scriptName,...e)},get:function(e,t,i){return new Promise(((o,r)=>{GM_xmlhttpRequest({method:"GET",url:e,headers:t,responseType:i||"json",onload:e=>{o(e.response||e.responseText)},onerror:e=>{r(e)}})}))},post:function(e,t,i,o){return t=t||{"Content-Type":"application/x-www-form-urlencoded"},new Promise(((r,n)=>{GM_xmlhttpRequest({method:"POST",url:e,headers:t,data:i,responseType:o||"json",onload:e=>{r(e.response||e.responseText)},onerror:e=>{n(e)}})}))},printReceiveMessage:function(e){n.debug(`>>> From: ${e.origin}, To: ${window.location.origin}, Message:`,e.data)},printSendMessage:function(e,t){n.debug(`<<< To: ${e}, From: ${window.location.origin}, Message:`,t)}}}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{Class:()=>e,Enum:()=>t,util:()=>r.D});var e=i(347),t=i(425),r=i(769)})(),o})()}));